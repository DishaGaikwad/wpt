<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Galaxy Animation</title>
<style>
  html, body {
    margin: 0; padding: 0; overflow: hidden;
    background: radial-gradient(circle at center, #000010 0%, #000000 80%);
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  canvas {
    display: block;
    background: transparent;
  }
</style>
</head>
<body>
<canvas id="galaxy"></canvas>
<script>
  const canvas = document.getElementById('galaxy');
  const ctx = canvas.getContext('2d');
  let width, height, cx, cy;

  function resize() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
    cx = width / 2;
    cy = height / 2;
  }
  resize();
  window.addEventListener('resize', resize);

  // Star class for galaxy stars orbiting center
  class Star {
    constructor() {
      this.orbitRadius = Math.random() * Math.min(cx, cy) * 0.9;
      this.radius = Math.random() * 1.3 + 0.5;
      this.angle = Math.random() * Math.PI * 2;
      this.speed = (0.001 + Math.random() * 0.002) * (Math.random() > 0.5 ? 1 : -1);
      this.alpha = Math.random() * 0.8 + 0.2;
    }
    update() {
      this.angle += this.speed;
      // Twinkle effect
      this.alpha += (Math.random() - 0.5) * 0.05;
      this.alpha = Math.min(1, Math.max(0.2, this.alpha));
    }
    draw(ctx) {
      const x = cx + this.orbitRadius * Math.cos(this.angle);
      const y = cy + this.orbitRadius * Math.sin(this.angle);
      const gradient = ctx.createRadialGradient(x, y, 0, x, y, this.radius * 5);
      gradient.addColorStop(0, `rgba(255, 255, 255, ${this.alpha})`);
      gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');
      ctx.fillStyle = gradient;
      ctx.beginPath();
      ctx.arc(x, y, this.radius * 4, 0, Math.PI * 2);
      ctx.fill();

      ctx.fillStyle = `rgba(255, 255, 255, ${this.alpha})`;
      ctx.beginPath();
      ctx.arc(x, y, this.radius, 0, Math.PI * 2);
      ctx.fill();
    }
  }

  // Generate many stars
  const stars = [];
  const numStars = 400;
  for (let i = 0; i < numStars; i++) {
    stars.push(new Star());
  }

  // Draw swirling galaxy arms using arcs and small stars
  function drawGalaxyArms(ctx, time) {
    ctx.save();
    ctx.translate(cx, cy);
    ctx.lineWidth = 1.5;

    const arms = 4;
    const armLength = Math.min(cx, cy) * 0.9;

    for (let i = 0; i < arms; i++) {
      ctx.strokeStyle = `rgba(200, 220, 255, 0.2)`;
      ctx.beginPath();

      // Spiral arm parameters
      const startAngle = time * 0.0002 + (i * (Math.PI * 2 / arms));
      for (let t = 0; t < armLength; t += 4) {
        const angle = 0.5 * t + startAngle;
        const radius = t;
        const x = radius * Math.cos(angle);
        const y = radius * Math.sin(angle);
        if (t === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      }
      ctx.stroke();

      // Draw small glowing dots along arm (stars)
      for (let s = 0; s < 20; s++) {
        const pos = (time * 0.05 + s * 15) % armLength;
        const angle = 0.5 * pos + startAngle;
        const radius = pos;
        const x = radius * Math.cos(angle);
        const y = radius * Math.sin(angle);
        const starAlpha = 0.6 + 0.4 * Math.sin(time * 0.01 + s);
        ctx.fillStyle = `rgba(255, 255, 255, ${starAlpha.toFixed(2)})`;
        ctx.beginPath();
        ctx.arc(x, y, 2.5, 0, Math.PI * 2);
        ctx.fill();
      }
    }
    ctx.restore();
  }

  // Draw glowing galaxy core
  function drawCore(ctx) {
    const gradient = ctx.createRadialGradient(cx, cy, 0, cx, cy, 100);
    gradient.addColorStop(0, 'rgba(255, 255, 255, 1)');
    gradient.addColorStop(0.2, 'rgba(255, 255, 200, 0.6)');
    gradient.addColorStop(0.6, 'rgba(255, 200, 150, 0.2)');
    gradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
    ctx.fillStyle = gradient;
    ctx.beginPath();
    ctx.arc(cx, cy, 100, 0, Math.PI * 2);
    ctx.fill();
  }

  // Draw background twinkling stars
  function drawBackgroundStars(ctx, count = 150) {
    for(let i = 0; i < count; i++) {
      const x = Math.random() * width;
      const y = Math.random() * height;
      const radius = Math.random() * 1.2;
      const alpha = Math.random();

      ctx.fillStyle = `rgba(255,255,255,${alpha.toFixed(2)})`;
      ctx.beginPath();
      ctx.arc(x, y, radius, 0, Math.PI * 2);
      ctx.fill();
    }
  }

  let lastTime = 0;

  function animate(t = 0) {
    const dt = t - lastTime;
    lastTime = t;

    ctx.clearRect(0, 0, width, height);

    // Draw background stars - keep it subtle and static for performance
    if(t === 0) drawBackgroundStars(ctx);

    // Draw galaxy core
    drawCore(ctx);

    // Draw galaxy arms spiraling
    drawGalaxyArms(ctx, t);

    // Update and draw stars orbiting galaxy
    for (let star of stars) {
      star.update();
      star.draw(ctx);
    }

    requestAnimationFrame(animate);
  }

  animate();
</script>
</body>
</html>
